***************
*** 17,22 ****
  #endif /* not lint */
  __FBSDID("$FreeBSD$");
  
  enum clnt_stat
  nlm_sm_notify_0(struct nlm_sm_status *argp, void *clnt_res, CLIENT *clnt, struct rpc_callextra *ext, struct timeval timo)
  {
--- 18,26 ----
  #endif /* not lint */
  __FBSDID("$FreeBSD$");
  
+ static int nlm_debug_delay_granted_res = 0;
+ SYSCTL_INT(_debug, OID_AUTO, nlm_debug_delay_granted_res, CTLFLAG_RW, &nlm_debug_delay_granted_res, 0, "");
+ 
  enum clnt_stat
  nlm_sm_notify_0(struct nlm_sm_status *argp, void *clnt_res, CLIENT *clnt, struct rpc_callextra *ext, struct timeval timo)
  {
***************
*** 326,331 ****
  enum clnt_stat
  nlm4_granted_res_4(nlm4_res *argp, void *clnt_res, CLIENT *clnt, struct rpc_callextra *ext, struct timeval timo)
  {
         return (CLNT_CALL_EXT(clnt, ext, NLM4_GRANTED_RES,
                 (xdrproc_t) xdr_nlm4_res, (caddr_t) argp,
                 (xdrproc_t) xdr_void, (caddr_t) clnt_res,
--- 330,342 ----
  enum clnt_stat
  nlm4_granted_res_4(nlm4_res *argp, void *clnt_res, CLIENT *clnt, struct rpc_callextra *ext, struct timeval timo)
  {
+        if (nlm_debug_delay_granted_res > 0) {
+                struct timespec rqt = {
+                                                                .tv_sec = nlm_debug_delay_granted_res,
+                                                                .tv_nsec = 0
+                                                          };
+                (void) kern_nanosleep(curthread, &rqt, NULL);
+        }
         return (CLNT_CALL_EXT(clnt, ext, NLM4_GRANTED_RES,
                 (xdrproc_t) xdr_nlm4_res, (caddr_t) argp,
                 (xdrproc_t) xdr_void, (caddr_t) clnt_res,
